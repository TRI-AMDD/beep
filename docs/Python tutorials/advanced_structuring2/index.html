
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for TRI-AMDD BEEP, for handling battery cycling data and predicting battery lifetines">
      
      
      
      
        <link rel="prev" href="../advanced_structuring/">
      
      
      <link rel="icon" href="../../static/tri_cropped_favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.5">
    
    
      
        <title>Advanced Structuring: Diagnostic and Custom Cyles - BEEP - Battery Evaluation and Early Prediction</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7a7fce14.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent="orange">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#advanced-structuring-diagnostic-and-custom-cyles" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="BEEP - Battery Evaluation and Early Prediction" class="md-header__button md-logo" aria-label="BEEP - Battery Evaluation and Early Prediction" data-md-component="logo">
      
  <img src="../../static/tri_cropped.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BEEP - Battery Evaluation and Early Prediction
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Advanced Structuring: Diagnostic and Custom Cyles
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/tri-amdd/beep" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="BEEP - Battery Evaluation and Early Prediction" class="md-nav__button md-logo" aria-label="BEEP - Battery Evaluation and Early Prediction" data-md-component="logo">
      
  <img src="../../static/tri_cropped.png" alt="logo">

    </a>
    BEEP - Battery Evaluation and Early Prediction
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tri-amdd/beep" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        Contribution guidelines
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../data/" class="md-nav__link">
        Cycler data requirements
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Command Line Interface
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Command Line Interface
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Command%20Line%20Interface/1%20-%20overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Command%20Line%20Interface/2%20-%20structuring/" class="md-nav__link">
        Structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Command%20Line%20Interface/3%20-%20featurize/" class="md-nav__link">
        Featurize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Command%20Line%20Interface/4%20-%20train/" class="md-nav__link">
        Train
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Command%20Line%20Interface/5%20-%20predict/" class="md-nav__link">
        Predict
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Command%20Line%20Interface/6%20-%20protocol/" class="md-nav__link">
        Protocol
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Command%20Line%20Interface/7%20-%20inspect/" class="md-nav__link">
        Inspect
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Python tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Python tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1%20-%20quickstart/" class="md-nav__link">
        1: Quickstart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2%20-%20structuring/" class="md-nav__link">
        2: Structuring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../3%20-%20featurization/" class="md-nav__link">
        3: Featurization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../4%20-%20models/" class="md-nav__link">
        4: Machine Learning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../advanced_structuring/" class="md-nav__link">
        Advanced Structuring: Unsupported cyclers
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Advanced Structuring: Diagnostic and Custom Cyles
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Advanced Structuring: Diagnostic and Custom Cyles
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-structure-diagnostic-cycles-in-beep" class="md-nav__link">
    How to structure diagnostic cycles in BEEP
  </a>
  
    <nav class="md-nav" aria-label="How to structure diagnostic cycles in BEEP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-a-defining-a-diagnosticconfig-from-cycle-indices" class="md-nav__link">
    1. (a) Defining a DiagnosticConfig from cycle indices
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-b-defining-a-diagnosticconfig-automatically-using-step-numbers" class="md-nav__link">
    1. (b) Defining a DiagnosticConfig automatically using step numbers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-c-working-with-diagnosticconfig" class="md-nav__link">
    1. (c) Working with DiagnosticConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-set-the-diagnosticconfig-object-to-beepdatapathdiagnostic" class="md-nav__link">
    2. Set the DiagnosticConfig object to BEEPDatapath.diagnostic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-interpolate" class="md-nav__link">
    3. Interpolate!
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-structure-diagnostic-cycles-in-beep" class="md-nav__link">
    How to structure diagnostic cycles in BEEP
  </a>
  
    <nav class="md-nav" aria-label="How to structure diagnostic cycles in BEEP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-a-defining-a-diagnosticconfig-from-cycle-indices" class="md-nav__link">
    1. (a) Defining a DiagnosticConfig from cycle indices
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-b-defining-a-diagnosticconfig-automatically-using-step-numbers" class="md-nav__link">
    1. (b) Defining a DiagnosticConfig automatically using step numbers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-c-working-with-diagnosticconfig" class="md-nav__link">
    1. (c) Working with DiagnosticConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-set-the-diagnosticconfig-object-to-beepdatapathdiagnostic" class="md-nav__link">
    2. Set the DiagnosticConfig object to BEEPDatapath.diagnostic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-interpolate" class="md-nav__link">
    3. Interpolate!
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="advanced-structuring-diagnostic-and-custom-cyles">Advanced Structuring: Diagnostic and Custom Cyles<a class="headerlink" href="#advanced-structuring-diagnostic-and-custom-cyles" title="Permanent link">&para;</a></h1>
<p>It is often necessary in cycling experiments to run cycles with more 
than standard aging charging or discharging steps. These may include reference 
performance testing (RPT), hybrid pulse power characterization (HPPC), or other custom 
series of steps. We refer to these as "diagnostic cycles".</p>
<p>BEEP's core <code>BEEPDatapath</code> object contains logic for interpolating these cycles in a 
reproducible way, but you must specify <em>where</em> in the cycler file the diagnostic cycles are. If the locations
of the diagnostic cycles are not specified, <code>BEEPDatapath</code> will treat these cycles as regular aging cycles.</p>
<p><img alt="hppc" src="../../static/hppc.png" /></p>
<h2 id="how-to-structure-diagnostic-cycles-in-beep">How to structure diagnostic cycles in BEEP<a class="headerlink" href="#how-to-structure-diagnostic-cycles-in-beep" title="Permanent link">&para;</a></h2>
<p>The series of steps for structuring diagnostic cycles is:</p>
<ol>
<li>Define a <code>DiagnosticConfig</code>; this is an object specifying where diagnostic cycles are located.</li>
<li>Set the <code>DiagnosticConfig</code> object as the <code>diagnostic</code> attribute of a <code>BEEPDatapath</code> object.</li>
<li>Structure using either <code>BEEPDatapath.stucture(...)</code> or <code>BEEPDatapath.interpolate_diagnostic_cycles(...)</code> (for more granularity.) </li>
</ol>
<h3 id="1-a-defining-a-diagnosticconfig-from-cycle-indices">1. (a) Defining a <code>DiagnosticConfig</code> from cycle indices<a class="headerlink" href="#1-a-defining-a-diagnosticconfig-from-cycle-indices" title="Permanent link">&para;</a></h3>
<p>The most direct way of specifying a <code>DiagnosticConfig</code> is by simply passing in the locations of the cycle 
indices for each type of diagnostic cycle in your file. This is done with a dictionary where the keys are
user-defined names of cycles and values are sets of cycle indices. </p>
<p>In this example, we'll say there are <em>only</em> HPPC cycles and they're located at cycle indices 1, 12, and 14.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">beep.structure.diagnostic</span> <span class="kn">import</span> <span class="n">DiagnosticConfig</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">dc</span> <span class="o">=</span> <span class="n">DiagnosticConfig</span><span class="p">(</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="p">{</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>        <span class="s2">&quot;hppc&quot;</span><span class="p">:</span> <span class="p">{</span><span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="p">}</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="p">)</span>
</code></pre></div>
<p>For a more complex example, let's say there are several kinds of cycles
at various intervals:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">from</span> <span class="nn">beep.structure.diagnostic</span> <span class="kn">import</span> <span class="n">DiagnosticConfig</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">rpt1_ix</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1002</span><span class="p">,</span> <span class="mi">200</span><span class="p">))</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="n">rpt2_ix</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1003</span><span class="p">,</span> <span class="mi">200</span><span class="p">))</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="n">hppc1_ix</span> <span class="o">=</span> <span class="p">{</span><span class="mi">12</span><span class="p">,</span> <span class="mi">512</span><span class="p">}</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="n">hppc2_ix</span> <span class="o">=</span> <span class="p">{</span><span class="mi">115</span><span class="p">,</span> <span class="mi">718</span><span class="p">,</span> <span class="mi">910</span><span class="p">}</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="n">reset_ix</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">}</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="n">abnormal_ix</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">520</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="n">dc</span> <span class="o">=</span> <span class="n">DiagnosticConfig</span><span class="p">(</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>    <span class="p">{</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>        <span class="s2">&quot;rpt1&quot;</span><span class="p">:</span> <span class="n">rpt1_ix</span><span class="p">,</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>        <span class="s2">&quot;rpt2&quot;</span><span class="p">:</span> <span class="n">rpt2_ix</span><span class="p">,</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>        <span class="s2">&quot;hppc1&quot;</span><span class="p">:</span> <span class="n">hppc1_ix</span><span class="p">,</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>        <span class="s2">&quot;hppc2&quot;</span><span class="p">:</span> <span class="n">hppc2_ix</span><span class="p">,</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>        <span class="s2">&quot;reset_&quot;</span><span class="p">:</span> <span class="n">reset_ix</span><span class="p">,</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>        <span class="s2">&quot;abnormal&quot;</span><span class="p">:</span> <span class="n">abnormal_ix</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>    <span class="p">},</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="p">)</span>
</code></pre></div>
<p>Note the names of the cycles are <strong>user defined</strong>, but BEEP will determine a
strategy of interpolation if the cycle names contain:</p>
<ul>
<li><code>"rpt"</code>: If found in the cycle name, these cycles will be treated as RPT. <em>E.g.,</em> <code>"rpt_0.2C"</code> would be interpolated as an RPT cycle.</li>
<li><code>"hppc"</code>: If found in the cycle name, these cycles will be treated as HPPC. </li>
<li><code>"reset"</code>: If found in the cycle name, these cycles will be treated as RESET cycles.</li>
<li>Any other cycle name will be interpolated on a step-by-step basis on the voltage axis.</li>
</ul>
<h3 id="1-b-defining-a-diagnosticconfig-automatically-using-step-numbers">1. (b) Defining a <code>DiagnosticConfig</code> automatically using step numbers<a class="headerlink" href="#1-b-defining-a-diagnosticconfig-automatically-using-step-numbers" title="Permanent link">&para;</a></h3>
<p>Specifying individual step numbers can be difficult, especially if you are 
working with someone else's file.</p>
<p>However, <code>DiagnosticConfig</code> can also be instantiated with a set of heuristics for recognizing 
step numbers present in certain cycles but missing in others. For example, if HPPC cycles always contain 
the step indices <code>14</code> and <code>16</code> and other cycles never do, we can automatically determine the cycle indices 
of the HPPC cycles.</p>
<p>We use the <code>DiagnosticConfig.from_step_numbers</code> method to instantiate the object automatically.
The <code>matching_critera</code> argument determines a set of "contains" or "exact" matching rules for each diagnostic cycle type.
We will also need the dataframe of raw data.</p>
<p>For example, let's say:</p>
<ul>
<li>Our HPPC cycles always at least contain step numbers 1,2,4,6,8.</li>
<li>Our low-rate RPT cycles are EXACTLY (only) step numbers 12 and 13.</li>
<li>Our high-rate RPT cycles are EXACTLY (only) step numbers 15 and 16.</li>
</ul>
<p>We can recognize the cycles automatically:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">from</span> <span class="nn">beep.structure.maccor</span> <span class="kn">import</span> <span class="n">MaccorDatapath</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kn">from</span> <span class="nn">beep.structure.diagnostic</span> <span class="kn">import</span> <span class="n">DiagnosticConfig</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="n">datapath</span> <span class="o">=</span> <span class="n">MaccorDatapath</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;MyMaccorFile.rar&quot;</span><span class="p">)</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="n">dc</span> <span class="o">=</span> <span class="n">DiagnosticConfig</span><span class="o">.</span><span class="n">from_step_numbers</span><span class="p">(</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>    <span class="n">datapath</span><span class="o">.</span><span class="n">raw_data</span><span class="p">,</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>    <span class="n">matching_criteria</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>        <span class="s2">&quot;hppc&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;contains&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">)]),</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>        <span class="s2">&quot;rpt_lowrate&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;exact&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">)]),</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>        <span class="s2">&quot;rpt_highrate&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;exact&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">)])</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>    <span class="p">}</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="p">)</span>
</code></pre></div>
<h3 id="1-c-working-with-diagnosticconfig">1. (c) Working with <code>DiagnosticConfig</code><a class="headerlink" href="#1-c-working-with-diagnosticconfig" title="Permanent link">&para;</a></h3>
<p>Once instantiated, <code>DiagnosticConfig</code> objects have some attributes for working 
with the cycle indices of each diagnostic cycle type.</p>
<ul>
<li><code>DiagnosticConfig.all_ix</code> gives the set of <em>all</em> diagnostic cycles, regardless of their type (as long as they are not regular aging cycles)</li>
<li><code>DiagnosticConfig.rpt_ix</code> gives the set of <em>all</em> RPT cycles, even those specified at different C-rates. For more info on how RPT cycles are recognized, see Step 1(a) above.</li>
<li><code>DiagnosticConfig.hppc_ix</code> gives the set of <em>all</em> HPPC cycles, even those with different parameters.</li>
<li><code>DiagnosticConfig.cycles</code> gives a mapping from a cycle type string (e.g., <code>"rpt_lowrate"</code>) to the set of it's cycle indices (e.g., <code>{1, 101, 201, ...}</code>)</li>
<li><code>DiagnosticConfig.type_by_ix</code> gives a mapping from cycle index (e.g., <code>101</code>) to the cycle type string (e.g., <code>"rpt_lowrate"</code>)</li>
</ul>
<p>Here is an example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">from</span> <span class="nn">beep.structure.diagnostic</span> <span class="kn">import</span> <span class="n">DiagnosticConfig</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="n">rpt1_ix</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1002</span><span class="p">,</span> <span class="mi">200</span><span class="p">))</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="n">rpt2_ix</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1003</span><span class="p">,</span> <span class="mi">200</span><span class="p">))</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="n">hppc1_ix</span> <span class="o">=</span> <span class="p">{</span><span class="mi">12</span><span class="p">,</span> <span class="mi">512</span><span class="p">}</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="n">hppc2_ix</span> <span class="o">=</span> <span class="p">{</span><span class="mi">115</span><span class="p">,</span> <span class="mi">718</span><span class="p">,</span> <span class="mi">910</span><span class="p">}</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="n">reset_ix</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">}</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="n">abnormal_ix</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">520</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="n">dc</span> <span class="o">=</span> <span class="n">DiagnosticConfig</span><span class="p">(</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>    <span class="p">{</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>        <span class="s2">&quot;rpt1&quot;</span><span class="p">:</span> <span class="n">rpt1_ix</span><span class="p">,</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>        <span class="s2">&quot;rpt2&quot;</span><span class="p">:</span> <span class="n">rpt2_ix</span><span class="p">,</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>        <span class="s2">&quot;hppc1&quot;</span><span class="p">:</span> <span class="n">hppc1_ix</span><span class="p">,</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>        <span class="s2">&quot;hppc2&quot;</span><span class="p">:</span> <span class="n">hppc2_ix</span><span class="p">,</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>        <span class="s2">&quot;reset_&quot;</span><span class="p">:</span> <span class="n">reset_ix</span><span class="p">,</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>        <span class="s2">&quot;abnormal&quot;</span><span class="p">:</span> <span class="n">abnormal_ix</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>    <span class="p">},</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="p">)</span>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;All diagnostic indices:&quot;</span><span class="p">,</span> <span class="n">dc</span><span class="o">.</span><span class="n">all_ix</span><span class="p">)</span>
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;All RPT indices:&quot;</span><span class="p">,</span> <span class="n">dc</span><span class="o">.</span><span class="n">rpt_ix</span><span class="p">)</span>
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;All HPPC indices:&quot;</span><span class="p">,</span> <span class="n">dc</span><span class="o">.</span><span class="n">hppc_ix</span><span class="p">)</span>
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;RPT1 indices:&quot;</span><span class="p">,</span> <span class="n">dc</span><span class="o">.</span><span class="n">cycles</span><span class="p">[</span><span class="s2">&quot;rpt_lowrate&quot;</span><span class="p">])</span>
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Cycle type of cycle 12:&quot;</span><span class="p">,</span> <span class="n">dc</span><span class="o">.</span><span class="n">type_by_ix</span><span class="p">[</span><span class="mi">12</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>All diagnostic indices: {0, 1, 2, 5, 12, 55...}
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>All RPT indices: {1, 2, 201, 202, 401, 402...}
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>All HPPC indices: {12, 115, 512, 718, 910}
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>RPT lowrate indices: {1, 201, 401, 601,...}
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>Cycle type of cycle 12:  hppc1
</code></pre></div>
<h3 id="2-set-the-diagnosticconfig-object-to-beepdatapathdiagnostic">2. Set the <code>DiagnosticConfig</code> object to <code>BEEPDatapath.diagnostic</code><a class="headerlink" href="#2-set-the-diagnosticconfig-object-to-beepdatapathdiagnostic" title="Permanent link">&para;</a></h3>
<p>Once <code>DiagnosticConfig</code> is instantiated alongside a datapath, 
set the <code>diagnostic</code> attribute of a <code>BEEPDatapath</code> to that object.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>datapath.diagnostic = diagnostic_config_object
</code></pre></div>
<h3 id="3-interpolate">3. Interpolate!<a class="headerlink" href="#3-interpolate" title="Permanent link">&para;</a></h3>
<p>You can now structure files normally using <code>BEEPDatapath.structure(...)</code> (for a full structuring of both diagnostic and normal cycles) or
<code>BEEPDatapath.interpolate_diagnostic_cycles(...)</code> (for diagnostic cycles only).</p>
<p>Here is a full example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">from</span> <span class="nn">beep.structure.novonix</span> <span class="kn">import</span> <span class="n">NovonixDatapath</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="kn">from</span> <span class="nn">beep.structure.diagnostic</span> <span class="kn">import</span> <span class="n">DiagnosticConfig</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="n">nd</span> <span class="o">=</span> <span class="n">NovonixDatapath</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;MyNovonixFile.091&quot;</span><span class="p">)</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="n">dc</span> <span class="o">=</span> <span class="n">DiagnosticConfig</span><span class="p">(</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    <span class="p">{</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>        <span class="s2">&quot;rpt&quot;</span><span class="p">:</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1002</span><span class="p">,</span> <span class="mi">200</span><span class="p">)),</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>        <span class="s2">&quot;hppc&quot;</span><span class="p">:</span> <span class="p">{</span><span class="mi">12</span><span class="p">,</span> <span class="mi">512</span><span class="p">},</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>        <span class="s2">&quot;reset&quot;</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">},</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>    <span class="p">},</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="p">)</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="n">nd</span><span class="o">.</span><span class="n">diagnostic</span> <span class="o">=</span> <span class="n">dc</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="n">nd</span><span class="o">.</span><span class="n">structure</span><span class="p">()</span>
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Toyota Research Institute
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.407015b8.min.js"></script>
      
    
  </body>
</html>